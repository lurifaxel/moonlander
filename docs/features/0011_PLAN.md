# Feature 0011 - Mobile Touch Controls Overlay

## Context
The Moon Lander browser build only accepts keyboard input, so coarse-pointer devices (phones, tablets) cannot thrust or rotate. We need an on-screen control surface that mirrors the existing keyboard behaviour without breaking desktop play or the level editor.

## Touch points
- `index.html`
  - Update the layout markup to host a HUD overlay next to the existing canvas/start menu structure.
  - Extend the CSS at the top of the file with responsive rules for the touch HUD and any auxiliary toggle button.
  - Augment the game bootstrap code (around the key listeners and `enterMenu`/`enterPlay` flow) to manage touch state, inject pointer events into the `keys` map, and keep bomb cooldown logic intact.
- `CHANGELOG.md`
  - Add an entry describing the new touch controls once implemented.

## Plan
1. **Add HUD scaffolding** – Wrap the canvas in a positioned container (e.g. `#gameRoot`) and insert a hidden `<div id="touchControls">` with buttons for left, right, thrust, and bomb. Include a toggle button (`#touchToggle`) so players can force the HUD on/off regardless of device heuristics.
2. **Style the overlay** – Author CSS for the container, HUD clusters, and toggle so buttons are finger-sized (>48px), anchored near the bottom corners, and hidden on desktop unless activated. Ensure the start menu/editor overlays remain visible by balancing `z-index` and `pointer-events`.
3. **Detect touch preference** – On startup and resize, decide whether to enable the HUD using `matchMedia('(pointer: coarse)')` plus stored user preference. Expose helpers to set/clear a `touchControlsActive` flag and update DOM classes accordingly.
4. **Bridge pointer events to `keys`** – Register `pointerdown/up/cancel/leave` handlers on each button. Maintain an active pointer map so simultaneous presses (e.g. thrust + rotate) emit the correct keyboard flags (`ArrowLeft`, `ArrowRight`, `ArrowUp`, `Space`) and release them reliably. Bomb presses should call `dropBomb()` when possible while respecting cooldown.
5. **Sync HUD with game modes** – Toggle visibility during `enterPlay`, `enterEditor`, `enterEditorTest`, `returnToEditorFromTest`, and menu transitions. When hiding the HUD, clear any active touch-induced key states to avoid stuck inputs. Adjust `resizeCanvas` or layout classes if the HUD reduces available space.
6. **Document & exercise** – Update `CHANGELOG.md` with a bullet about mobile controls. Manually test keyboard, single-touch, and multi-touch paths (dedicated bomb press, rotation + thrust) to confirm parity with desktop controls.

## Notes
- Keep the existing keyboard listeners intact; touch input should piggyback on the same `keys` map.
- Ensure the toggle button is keyboard accessible and does not interfere with editor pointer capture.
- Account for pointer capture quirks by releasing keys on `blur` or when the HUD deactivates.
